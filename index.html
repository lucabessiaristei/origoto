<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Origoto — FOLD Layer Editor</title>
    <link rel="stylesheet" href="style.min.css">
    <link rel="icon" type="image/svg+xml" href="media/favicon/favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="media/favicon/favicon_32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="media/favicon/favicon_16.png">
    <link rel="stylesheet" type="text/css"
        href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/fill/style.css" />
    <link rel="stylesheet" type="text/css"
        href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/regular/style.css" />
</head>

<body>
    <header>
        <a href="/"><h1>ORIGOTO — FOLD Layer Editor</h1></a>
        <button id="uploadNewBtn" class="small">Import</button>
        <button id="exampleBtn" class="small">Example</button>
        <button id="exportModalBtn" class="small primary" style="display:none">Export</button>
        <button id="helpBtn" title="Help" class="small">Help</button>
        <div class="spacer"></div>
        <div class="tags" id="tags"></div>
    </header>

    <div class="main">

        <div class="canvas-wrap" id="canvasArea">
            <div class="drop-zone" id="dropZone">
                <img height="200" src="media/fatina-cutout.svg">
                <p id="dropText" style="margin-top: 3rem;">Drop a .fold file here or click to browse</p>
                <input type="file" id="fileInput" accept=".fold,.json" style="display:none">
            </div>

            <svg id="origamiSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 1" style="display:none">
                <g id="facesLayer"></g>
                <g id="highlightLayer"></g>
            </svg>

            <div class="transform-controls" id="transformControls" style="display:none">
                <button id="rotateCCWBtn" title="Rotate 90° Counter-clockwise">
                    <i class="ph ph-arrow-counter-clockwise"></i>
                </button>
                <button id="rotateCWBtn" title="Rotate 90° Clockwise">
                    <i class="ph ph-arrow-clockwise"></i>
                </button>
                <button id="flipBtn" title="Flip Horizontally">
                    <i class="ph-fill ph-selection-inverse"></i>
                </button>
            </div>

            <div class="viewport-controls" id="viewControls" style="display:none">
                <button id="quickOrderBtn" title="Quick Order Tool (Click: Back | Alt+Click: Front)">
                    <i class="ph-fill ph-stack"></i>
                </button>
                <button id="unfoldBtn" title="Preview Unfold">
                    <i class="ph ph-grid-four"></i>
                </button>
                <div class="hr-sep"></div>
                <button id="zoomIn"><i class="ph-fill ph-plus"></i></button>
                <button id="zoomReset">1:1</button>
                <button id="zoomOut"><i class="ph-fill ph-minus"></i></button>
            </div>
        </div>

        <div class="sidebar" id="sidebar" style="display:none">
            <div class="sidebar-resize" id="sidebarResize"></div>
            <div class="sidebar-title">draw order (top = front)</div>
            <div class="layer-list" id="layerList"></div>
            <div class="bottom-bar">
                <button id="undoBtn" class="small">Undo</button>
                <button id="redoBtn" class="small">Redo</button>
                <div class="spacer"></div>
                <button id="resetBtn" class="small">Reset</button>
            </div>
        </div>
    </div>

    <a class="github-link" href="https://github.com/lucabessiaristei/origoto" target="_blank" rel="noopener">
        <i class="ph-fill ph-github-logo"></i>
    </a>

    <div class="help-overlay" id="helpOverlay">
        <div class="help-box">
            <div class="help-header">
                <span>Keyboard Shortcuts & Controls</span>
                <button class="help-close" id="helpClose"><i class="ph-fill ph-x"></i></button>
            </div>
            <div class="help-content">
                <div class="help-section">
                    <div class="help-section-title">Navigation</div>
                    <div class="help-row"><kbd>Scroll</kbd><span>Zoom in / out</span></div>
                    <div class="help-row"><kbd>Drag</kbd> on empty area<span>Pan</span></div>
                    <div class="help-row"><kbd>Space</kbd> + drag<span>Pan over faces</span></div>
                    <div class="help-row"><kbd>Middle click</kbd> + drag<span>Pan (anywhere)</span></div>
                </div>
                <div class="help-section">
                    <div class="help-section-title">Editing</div>
                    <div class="help-row"><kbd>Click</kbd> face<span>Select face</span></div>
                    <div class="help-row"><kbd>Ctrl/Cmd</kbd> + <kbd>Z</kbd><span>Undo</span></div>
                    <div class="help-row"><kbd>Ctrl/Cmd</kbd> + <kbd>Shift</kbd> + <kbd>Z</kbd><span>Redo</span></div>
                    <div class="help-row"><kbd>Ctrl/Cmd</kbd> + <kbd>Y</kbd><span>Redo</span></div>
                </div>
                <div class="help-section">
                    <div class="help-section-title">Toolbar</div>
                    <div class="help-row"><i class="ph-fill ph-stack"></i><span>Quick Order — click face to send back, Alt+click to send front</span></div>
                    <div class="help-row"><i class="ph ph-grid-four"></i><span>Unfold Preview — click anywhere to fold back</span></div>
                </div>
                <div class="help-section">
                    <div class="help-section-title">Sidebar</div>
                    <div class="help-row"><span>Drag layers to reorder. Use arrow buttons for precise control.</span></div>
                </div>
            </div>
        </div>
    </div>

    <div class="export-overlay" id="exportOverlay">
        <div class="export-box">
            <div class="export-header">
                <span>Export</span>
                <button class="help-close" id="exportClose"><i class="ph-fill ph-x"></i></button>
            </div>
            <div class="export-content">
                <div class="export-tabs">
                    <button class="export-tab active" data-format="fold">FOLD</button>
                    <button class="export-tab" data-format="svg">SVG</button>
                </div>
                <div class="export-panel" id="foldPanel">
                    <label class="export-field">
                        <span>Author</span>
                        <input type="text" id="exportAuthor" placeholder="(optional)">
                    </label>
                    <label class="export-check">
                        <input type="checkbox" id="exportFaceOrders" checked>
                        <span>Overwrite faceOrders</span>
                    </label>
                </div>
                <div class="export-panel" id="svgPanel" style="display:none">
                    <label class="export-field">
                        <span>Type</span>
                        <select id="exportSvgType">
                            <option value="snapshot">Snapshot (folded view)</option>
                            <option value="crease">Crease pattern (flat)</option>
                        </select>
                    </label>
                    <label class="export-check">
                        <input type="checkbox" id="exportSvgBg">
                        <span>White background</span>
                    </label>
                </div>
                <button class="primary export-confirm" id="exportConfirmBtn">Export</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>